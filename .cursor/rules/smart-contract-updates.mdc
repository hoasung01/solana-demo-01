---
description:
globs:
alwaysApply: false
---
# Smart Contract Updates

## Stake Pool Program Updates

### Recent Changes
1. Added BNPL transaction processing
2. Implemented card linking functionality
3. Enhanced stake management
4. Improved error handling
5. Added security checks

### Program Structure
Main program file: [programs/stake-pool/src/lib.rs](mdc:programs/stake-pool/src/lib.rs)

### Client Integration
Updated in [src/hooks/use-stake-pool.ts](mdc:src/hooks/use-stake-pool.ts):
1. Program initialization
2. Transaction handling
3. Error management

### Constants
Updated in [src/lib/constants.ts](mdc:src/lib/constants.ts):
1. Program ID
2. Fee structures
3. Error messages

## Development Process

### Testing
1. Local testing with test ledger
2. Unit tests for all instructions
3. Integration tests
4. Security audits
5. Performance testing

### Deployment
1. Testnet deployment
2. Security review
3. Mainnet deployment
4. Monitoring setup
5. Backup procedures

## Guidelines
1. Follow Solana best practices
2. Maintain backward compatibility
3. Document all changes
4. Test thoroughly
5. Security first approach
